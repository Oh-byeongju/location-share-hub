<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="marker">
    <resultMap id="hashMapVO" type="com.sjinc.bss.framework.data.HashMapVO"/>
    <resultMap id="hashMapResultVO" type="com.sjinc.bss.framework.data.HashMapResultVO"/>

    <!--    마커 상세 조회 쿼리-->
    <select id="selectMarkerAllById" parameterType="int" resultMap="hashMapResultVO">
        SELECT mm.marker_no, mm.user_id, mu.user_nm, mm.marker_nm, mm.marker_address, sc.cd_nm, mm.marker_text, mm.insert_dt
        FROM map_marker mm INNER JOIN map_user mu ON mm.user_id = mu.user_id INNER JOIN sy_cmm_cd sc ON mm.marker_type_cd = sc.cd
        WHERE mm.marker_no = #{markerNo}
    </select>

<!--    특정 마커 검색 쿼리-->
    <select id="selectMarkerById" parameterType="java.util.Map" resultType="int">
        SELECT mm.marker_no
        FROM map_marker mm
        WHERE mm.marker_no = #{markerNo}
    </select>

<!--    마커 즐겨찾기 검색 쿼리-->
    <select id="getMapBookmark" parameterType="java.util.Map" resultType="int">
        SELECT mb.marker_no
        FROM map_bookmark mb
        WHERE user_id = #{userId} AND marker_no = #{markerNo}
    </select>

<!--    마커 즐겨찾기 생성 쿼리-->
    <insert id="insertMapBookmark" parameterType="java.util.Map">
        INSERT INTO map_bookmark (
            user_id, marker_no, insert_dt, insert_id, insert_ip, update_dt, update_id, update_ip
        )
        VALUES (
                   #{userId}, #{markerNo}, NOW(), #{userId}, #{insertIP}, NULL, NULL, NULL
               )
    </insert>

<!--    마커 즐겨찾기 삭제 쿼리-->
    <delete id="deleteMapBookmark" parameterType="java.util.Map">
        DELETE
        FROM map_bookmark
        WHERE user_id = #{userId} AND marker_no = #{markerNo}
    </delete>
</mapper>